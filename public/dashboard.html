<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SecureComm - Command Dashboard</title>
    <link rel="icon" type="image/png" href="logo.png">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Courier New', monospace;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 50%, #16213e 100%);
            color: #ffffff;
            height: 100vh;
            overflow: hidden;
            position: relative;
        }

        /* Enhanced military grid background */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image:
                linear-gradient(rgba(74, 222, 128, 0.05) 1px, transparent 1px),
                linear-gradient(90deg, rgba(74, 222, 128, 0.05) 1px, transparent 1px),
                radial-gradient(circle at 25% 25%, rgba(74, 222, 128, 0.02) 0%, transparent 50%),
                radial-gradient(circle at 75% 75%, rgba(34, 211, 238, 0.02) 0%, transparent 50%);
            background-size: 40px 40px, 40px 40px, 200px 200px, 300px 300px;
            pointer-events: none;
            z-index: -1;
            animation: gridPulse 8s ease-in-out infinite;
        }

        @keyframes gridPulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        /* Header */
        .header {
            position: fixed;
            top: 0;
            width: 100%;
            height: 80px;
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(20px);
            z-index: 1000;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 30px;
            border-bottom: 3px solid rgba(74, 222, 128, 0.4);
            box-shadow: 0 5px 30px rgba(0, 0, 0, 0.5);
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, transparent, #4ade80, #22d3ee, #4ade80, transparent);
            animation: headerScan 3s ease-in-out infinite;
        }

        @keyframes headerScan {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }

        .logo {
            font-size: 24px;
            font-weight: bold;
            color: #4ade80;
            display: flex;
            align-items: center;
            gap: 15px;
            text-shadow: 0 0 20px rgba(74, 222, 128, 0.5);
        }

        .logo::before {
            content: '';
            width: 45px;
            height: 45px;
            background-image: url('logo.png');
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            display: inline-block;
            animation: logoGlow 5s ease-in-out infinite;
        }

        @keyframes logoGlow {
            0%, 100% {
                filter: drop-shadow(0 0 10px rgba(74, 222, 128, 0.8));
                transform: scale(1);
            }
            50% {
                filter: drop-shadow(0 0 25px rgba(74, 222, 128, 1));
                transform: scale(1.1);
            }
        }

        .header-center {
            display: flex;
            gap: 30px;
            align-items: center;
        }

        .nav-btn {
            padding: 8px 20px;
            border: 2px solid #4ade80;
            background: transparent;
            color: #4ade80;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
            font-family: 'Courier New', monospace;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.3s ease;
            font-size: 12px;
        }

        .nav-btn:hover, .nav-btn.active {
            background: rgba(74, 222, 128, 0.15);
            box-shadow: 0 0 20px rgba(74, 222, 128, 0.4);
            transform: translateY(-2px);
        }

        .approval-indicator {
            background: rgba(251, 191, 36, 0.2);
            border: 2px solid #fbbf24;
            color: #fbbf24;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 15px;
            background: rgba(0, 0, 0, 0.6);
            padding: 8px 15px;
            border-radius: 25px;
            border: 2px solid rgba(74, 222, 128, 0.3);
        }

        .profile-photo {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: 2px solid #4ade80;
            background: rgba(74, 222, 128, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }

        .user-info {
            display: flex;
            flex-direction: column;
            gap: 2px;
        }

        .user-name {
            font-size: 14px;
            font-weight: bold;
            color: #4ade80;
        }

        .user-details {
            font-size: 10px;
            color: #94a3b8;
        }

        /* Main Container */
        .main-container {
            display: flex;
            height: calc(100vh - 80px);
            margin-top: 80px;
        }

        /* Left Sidebar */
        .left-sidebar {
            width: 350px;
            background: rgba(0, 0, 0, 0.8);
            border-right: 2px solid rgba(74, 222, 128, 0.3);
            backdrop-filter: blur(20px);
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .sidebar-header {
            padding: 20px;
            border-bottom: 2px solid rgba(74, 222, 128, 0.3);
            background: rgba(0, 0, 0, 0.5);
        }

        .sidebar-header .search-input {
            width: 100%;
            padding: 12px;
            background: rgba(0, 0, 0, 0.6);
            border: 2px solid rgba(74, 222, 128, 0.3);
            border-radius: 10px;
            color: #fff;
            font-size: 14px;
            margin-bottom: 15px;
            font-family: 'Courier New', monospace;
            transition: all 0.3s ease;
        }

        .sidebar-header .search-input:focus {
            border-color: #4ade80;
            box-shadow: 0 0 20px rgba(74, 222, 128, 0.3);
            transform: translateY(-2px);
        }

        .questions-scroll {
            flex: 1;
            overflow: hidden;
            position: relative;
            mask-image: linear-gradient(to bottom, transparent 0%, black 10%, black 90%, transparent 100%);
        }

        .questions-container {
            animation: scrollUp 20s linear infinite;
        }

        @keyframes scrollUp {
            0% { transform: translateY(0); }
            100% { transform: translateY(-50%); }
        }

        .question-item {
            background: rgba(0, 0, 0, 0.6);
            border: 1px solid rgba(74, 222, 128, 0.3);
            border-radius: 10px;
            padding: 15px;
            margin: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .question-item:hover {
            background: rgba(74, 222, 128, 0.1);
            border-color: #4ade80;
            transform: translateX(5px);
        }

        .question-text {
            font-size: 14px;
            color: #e2e8f0;
            margin-bottom: 10px;
        }

        .question-meta {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: #64748b;
            margin-bottom: 10px;
        }

        .answer-btn {
            padding: 8px 15px;
            background: linear-gradient(45deg, #4ade80, #22d3ee);
            border: none;
            border-radius: 15px;
            color: #000;
            font-weight: bold;
            cursor: pointer;
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.3s ease;
            width: 100%;
        }

        .answer-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(74, 222, 128, 0.4);
        }

        /* Main Content Area */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .content-tabs {
            display: flex;
            background: rgba(0, 0, 0, 0.8);
            border-bottom: 2px solid rgba(74, 222, 128, 0.3);
            padding: 0 20px;
        }

        .tab-btn {
            padding: 15px 25px;
            background: transparent;
            border: none;
            color: #94a3b8;
            cursor: pointer;
            font-family: 'Courier New', monospace;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-size: 12px;
            transition: all 0.3s ease;
            position: relative;
        }

        .tab-btn.active {
            color: #4ade80;
        }

        .tab-btn.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: #4ade80;
        }

        .tab-content {
            flex: 1;
            display: none;
            flex-direction: column;
            overflow-y: auto;
        }

        .tab-content.active {
            display: flex;
        }

        /* Chat Interface */
        .chat-container {
            display: flex;
            height: 100%;
        }

        .chat-list {
            width: 280px;
            background: rgba(0, 0, 0, 0.6);
            border-right: 2px solid rgba(74, 222, 128, 0.3);
            display: flex;
            flex-direction: column;
        }

        .search-section {
            padding: 15px;
            border-bottom: 1px solid rgba(74, 222, 128, 0.3);
        }

        .search-input {
            width: 100%;
            padding: 12px;
            background: rgba(0, 0, 0, 0.8);
            border: 2px solid rgba(74, 222, 128, 0.3);
            border-radius: 20px;
            color: #fff;
            font-size: 14px;
            outline: none;
            font-family: 'Courier New', monospace;
        }

        .search-input:focus {
            border-color: #4ade80;
            box-shadow: 0 0 15px rgba(74, 222, 128, 0.3);
        }

        .chat-items {
            flex: 1;
            overflow-y: auto;
            padding: 10px;
        }

        .chat-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background: rgba(0, 0, 0, 0.4);
            border-radius: 10px;
            margin-bottom: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .chat-item:hover, .chat-item.active {
            background: rgba(74, 222, 128, 0.1);
            border: 1px solid rgba(74, 222, 128, 0.5);
        }

        .chat-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(74, 222, 128, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            color: #4ade80;
        }

        .chat-info {
            flex: 1;
        }

        .chat-name {
            font-size: 13px;
            font-weight: bold;
            color: #e2e8f0;
            margin-bottom: 2px;
        }

        .chat-preview {
            font-size: 11px;
            color: #64748b;
        }

        .chat-time {
            font-size: 10px;
            color: #64748b;
        }

        /* Chat Window */
        .chat-window {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: rgba(0, 0, 0, 0.4);
        }

        .chat-header {
            padding: 20px;
            border-bottom: 2px solid rgba(74, 222, 128, 0.3);
            background: rgba(0, 0, 0, 0.6);
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .chat-header-info {
            flex: 1;
        }

        .chat-title {
            font-size: 16px;
            font-weight: bold;
            color: #4ade80;
        }

        .chat-status {
            font-size: 12px;
            color: #94a3b8;
        }

        .chat-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .message {
            max-width: 70%;
            padding: 12px 18px;
            border-radius: 15px;
            font-size: 14px;
            line-height: 1.4;
        }

        .message.sent {
            align-self: flex-end;
            background: linear-gradient(45deg, #4ade80, #22d3ee);
            color: #000;
        }

        .message.received {
            align-self: flex-start;
            background: rgba(74, 222, 128, 0.1);
            border: 1px solid rgba(74, 222, 128, 0.3);
            color: #e2e8f0;
        }

        .message-time {
            font-size: 10px;
            opacity: 0.7;
            margin-top: 5px;
        }

        .chat-input-section {
            padding: 20px;
            border-top: 2px solid rgba(74, 222, 128, 0.3);
            background: rgba(0, 0, 0, 0.6);
        }

        .chat-input-container {
            display: flex;
            gap: 10px;
            align-items: flex-end;
        }

        .chat-input {
            flex: 1;
            padding: 12px;
            background: rgba(0, 0, 0, 0.8);
            border: 2px solid rgba(74, 222, 128, 0.3);
            border-radius: 10px;
            color: #fff;
            font-size: 14px;
            outline: none;
            font-family: 'Courier New', monospace;
            resize: none;
            min-height: 40px;
            max-height: 100px;
        }

        .chat-input:focus {
            border-color: #4ade80;
            box-shadow: 0 0 15px rgba(74, 222, 128, 0.3);
        }

        .send-btn {
            padding: 12px 20px;
            background: linear-gradient(45deg, #4ade80, #22d3ee);
            border: none;
            border-radius: 10px;
            color: #000;
            font-weight: bold;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .send-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(74, 222, 128, 0.4);
        }

        /* Hierarchy Tab */
        .hierarchy-content {
            padding: 20px;
            overflow-y: auto;
        }

        .hierarchy-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .hierarchy-title {
            font-size: 20px;
            font-weight: bold;
            color: #4ade80;
            text-transform: uppercase;
        }

        .post-question-btn {
            padding: 12px 20px;
            background: linear-gradient(45deg, #4ade80, #22d3ee);
            border: none;
            border-radius: 8px;
            color: #000;
            font-weight: bold;
            cursor: pointer;
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.3s ease;
        }

        .post-question-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(74, 222, 128, 0.4);
        }

        .hierarchy-item {
            background: rgba(0, 0, 0, 0.6);
            border: 1px solid rgba(74, 222, 128, 0.3);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            transition: all 0.3s ease;
        }

        .hierarchy-item:hover {
            background: rgba(74, 222, 128, 0.05);
            border-color: #4ade80;
        }

        .hierarchy-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .unit-info {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .unit-badge {
            background: rgba(74, 222, 128, 0.2);
            color: #4ade80;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 10px;
            font-weight: bold;
            text-transform: uppercase;
        }

        .answer-badge {
            background: rgba(34, 211, 238, 0.2);
            color: #22d3ee;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 10px;
            font-weight: bold;
        }


        /* ================================== */
        /* == STEGOSECURE TAB STYLES START == */
        /* ================================== */

        .stego-container {
            padding: 20px;
            width: 100%;
            max-width: 900px;
            margin: 0 auto;
        }

        .stego-container h1 {
            text-align: center;
            color: #4ade80;
            margin-bottom: 10px;
            font-size: 2em;
            text-shadow: 0 0 15px rgba(74, 222, 128, 0.5);
        }

        .stego-container .stego-slogan {
            text-align: center;
            color: #94a3b8;
            margin-bottom: 30px;
        }

        .stego-sub-tabs {
            display: flex;
            margin-bottom: 30px;
            border-bottom: 2px solid rgba(74, 222, 128, 0.3);
        }

        .stego-sub-tab {
            flex: 1;
            padding: 15px 20px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            font-family: 'Courier New', monospace;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: #94a3b8;
            transition: all 0.3s;
            position: relative;
        }

        .stego-sub-tab.active {
            color: #4ade80;
        }

        .stego-sub-tab.active::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            right: 0;
            height: 2px;
            background: #4ade80;
        }

        .stego-sub-tab:hover {
            color: #4ade80;
            background: rgba(74, 222, 128, 0.05);
        }

        .stego-tab-content {
            display: none;
        }

        .stego-tab-content.active {
            display: block;
        }

        .stego-section {
            margin-bottom: 30px;
            padding: 25px;
            background: rgba(0, 0, 0, 0.4);
            border-radius: 12px;
            border-left: 4px solid #4ade80;
        }

        .stego-section h2 {
            color: #4ade80;
            margin-bottom: 15px;
            font-size: 1.4em;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #4ade80;
            text-transform: uppercase;
            font-size: 12px;
            letter-spacing: 1px;
        }

        .form-input, .form-textarea, .form-password {
            width: 100%;
            padding: 12px;
            background: rgba(0, 0, 0, 0.8);
            border: 2px solid rgba(74, 222, 128, 0.3);
            border-radius: 8px;
            color: #e2e8f0;
            font-size: 14px;
            font-family: 'Courier New', monospace;
            transition: border-color 0.3s;
        }

        .form-input:focus, .form-textarea:focus, .form-password:focus {
            outline: none;
            border-color: #4ade80;
        }

        .form-textarea {
            resize: vertical;
            min-height: 100px;
        }
        
        .custom-file-input {
            border: 2px dashed rgba(74, 222, 128, 0.5);
            padding: 20px;
            text-align: center;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            color: #94a3b8;
        }
        
        .custom-file-input:hover {
            border-color: #4ade80;
            background: rgba(74, 222, 128, 0.05);
            color: #4ade80;
        }

        .btn-group {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .stego-btn {
            flex: 1;
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            font-family: 'Courier New', monospace;
            text-transform: uppercase;
        }

        .stego-btn.primary {
            background: linear-gradient(45deg, #4ade80, #22d3ee);
            color: #000;
        }

        .stego-btn.secondary {
            background: linear-gradient(45deg, #22d3ee, #4ade80);
            color: #000;
        }

        .stego-btn.clear {
            background: rgba(239, 68, 68, 0.2);
            color: #ef4444;
            border: 2px solid #ef4444;
        }

        .stego-btn.download {
            background: #4ade80;
            color: #000;
        }

        .stego-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(74, 222, 128, 0.4);
        }

        .stego-result {
            margin-top: 15px;
            padding: 15px;
            background: rgba(0, 0, 0, 0.7);
            border-radius: 8px;
            word-break: break-all;
            font-family: monospace;
            font-size: 14px;
            line-height: 1.5;
            border-left: 3px solid;
        }

        .stego-result.error {
            border-color: #ef4444;
            color: #ef4444;
        }

        .stego-result.success {
            border-color: #4ade80;
            color: #4ade80;
        }
        
        .stego-info {
            background: rgba(34, 211, 238, 0.1);
            color: #22d3ee;
            border-left: 4px solid #22d3ee;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .preview-container {
            display: flex;
            gap: 20px;
            margin-top: 20px;
        }

        .preview-box {
            flex: 1;
            text-align: center;
            padding: 20px;
            border: 2px dashed rgba(74, 222, 128, 0.5);
            border-radius: 8px;
            background: rgba(0, 0, 0, 0.4);
        }

        .preview-box img {
            max-width: 100%;
            max-height: 200px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.4);
            border: 1px solid rgba(74, 222, 128, 0.3);
        }

        .preview-box h3 {
            margin: 10px 0;
            color: #4ade80;
            text-transform: uppercase;
            font-size: 12px;
            letter-spacing: 1px;
        }

        .copy-btn {
            background: #4ade80;
            color: #000;
            padding: 5px 10px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            margin-top: 10px;
            text-transform: uppercase;
            font-weight: bold;
        }

        .progress-bar {
            width: 100%;
            height: 10px;
            background: rgba(0, 0, 0, 0.7);
            border-radius: 10px;
            overflow: hidden;
            margin: 20px 0 10px 0;
            border: 1px solid rgba(74, 222, 128, 0.3);
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4ade80, #22d3ee);
            width: 0%;
            transition: width 0.3s;
            border-radius: 10px;
        }

        .step-indicator {
            display: flex;
            justify-content: space-between;
            margin: 20px 0;
            gap: 10px;
        }

        .step {
            flex: 1;
            text-align: center;
            padding: 10px;
            background: rgba(0, 0, 0, 0.6);
            border-radius: 8px;
            font-size: 12px;
            color: #94a3b8;
            border: 1px solid rgba(74, 222, 128, 0.3);
            transition: all 0.3s;
        }

        .step.active {
            background: rgba(74, 222, 128, 0.2);
            color: #4ade80;
            border-color: #4ade80;
        }

        .step.completed {
            background: #4ade80;
            color: #000;
            border-color: #4ade80;
        }


        /* ================================== */
        /* == STEGOSECURE TAB STYLES END == */
        /* ================================== */


        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
        }

        .modal-content {
            background: rgba(0, 0, 0, 0.95);
            margin: 5% auto;
            padding: 30px;
            border: 2px solid #4ade80;
            border-radius: 15px;
            width: 80%;
            max-width: 600px;
            position: relative;
            backdrop-filter: blur(20px);
            box-shadow: 0 25px 60px rgba(0, 0, 0, 0.8);
        }

        .modal-header {
            text-align: center;
            margin-bottom: 20px;
        }

        .modal-title {
            font-size: 24px;
            color: #4ade80;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .close-btn {
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 24px;
            color: #4ade80;
            cursor: pointer;
        }

        /* Answer Popup Styles */
        .answer-popup {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 2000;
        }

        .answer-form {
            background: rgba(0, 0, 0, 0.9);
            border: 2px solid #4ade80;
            border-radius: 15px;
            padding: 40px;
            max-width: 600px;
            width: 90%;
            position: relative;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.8);
        }

        .question-display {
            background: rgba(74, 222, 128, 0.1);
            border: 1px solid rgba(74, 222, 128, 0.3);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .question-label {
            color: #4ade80;
            font-size: 12px;
            font-weight: bold;
            margin-bottom: 10px;
            letter-spacing: 1px;
        }

        .selected-question {
            color: #e2e8f0;
            font-size: 16px;
            line-height: 1.6;
            margin-bottom: 10px;
        }

        .session-tag {
            display: inline-block;
            background: rgba(74, 222, 128, 0.2);
            color: #4ade80;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: bold;
            text-transform: uppercase;
        }

        .answer-textarea {
            width: 100%;
            height: 150px;
            background: rgba(0, 0, 0, 0.6);
            border: 2px solid rgba(74, 222, 128, 0.5);
            border-radius: 10px;
            color: #fff;
            padding: 15px;
            font-family: 'Courier New', monospace;
            font-size: 16px;
            resize: vertical;
            outline: none;
            margin-bottom: 20px;
        }

        .answer-textarea:focus {
            border-color: #4ade80;
            box-shadow: 0 0 20px rgba(74, 222, 128, 0.3);
        }

        /* Update the form-buttons and form-btn styles in your CSS */
.form-buttons {
    display: flex;
    gap: 15px;
    margin-top: 20px;
}

.form-btn {
    flex: 1;
    padding: 12px 20px;
    border-radius: 8px;
    font-size: 14px;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.3s ease;
    font-family: 'Courier New', monospace;
    text-transform: uppercase;
    letter-spacing: 1px;
    background: transparent;
}

.form-btn.submit {
    background: linear-gradient(45deg, #4ade80, #22d3ee);
    border: none;
    color: #000;
}

.form-btn.cancel {
    background: rgba(74, 222, 128, 0.1);
    border: 2px solid #4ade80;
    color: #4ade80;
}

.form-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(74, 222, 128, 0.4);
}

.form-btn.cancel:hover {
    background: rgba(74, 222, 128, 0.2);
}

/* Approval Items Styles */
.approval-item {
    background: rgba(0, 0, 0, 0.6);
    border: 1px solid rgba(74, 222, 128, 0.3);
    border-radius: 10px;
    padding: 20px;
    margin-bottom: 15px;
}

.approval-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
}

.approval-title {
    font-size: 16px;
    font-weight: bold;
    color: #4ade80;
}

.approval-meta {
    font-size: 12px;
    color: #94a3b8;
}

.approval-content {
    color: #e2e8f0;
    margin-bottom: 15px;
    font-size: 14px;
    line-height: 1.6;
}

.approval-actions {
    display: flex;
    gap: 10px;
}

.approval-btn {
    flex: 1;
    padding: 10px;
    border-radius: 6px;
    font-size: 14px;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.3s ease;
}

.approve-btn {
    background: linear-gradient(45deg, #4ade80, #22d3ee);
    border: none;
    color: #000;
}

.reject-btn {
    background: rgba(239, 68, 68, 0.1);
    border: 2px solid #ef4444;
    color: #ef4444;
}

.approval-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(74, 222, 128, 0.4);
}

/* Responsive Design */
        @media (max-width: 1024px) {
            .left-sidebar {
                width: 300px;
            }

            .chat-list {
                width: 250px;
            }
        }

        @media (max-width: 768px) {
            .main-container {
                flex-direction: column;
            }

            .left-sidebar {
                width: 100%;
                height: 200px;
                border-right: none;
                border-bottom: 2px solid rgba(74, 222, 128, 0.3);
            }

            .questions-scroll {
                flex-direction: row;
                overflow-x: auto;
                overflow-y: hidden;
                padding: 15px;
            }

            .question-item {
                min-width: 250px;
                margin-right: 15px;
                margin-bottom: 0;
            }

            .preview-container {
                flex-direction: column;
            }
        }

        /* Dashboard Specific Styles */
        .dashboard-container {
            padding: 20px;
            height: 100%;
            overflow-y: auto;
        }

        .welcome-section {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .welcome-header {
            margin-bottom: 20px;
        }

        .welcome-header h1 {
            font-size: 24px;
            color: #4ade80;
            margin-bottom: 5px;
        }

        .timestamp {
            color: #94a3b8;
            font-size: 14px;
        }

        .status-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .status-card {
            background: rgba(0, 0, 0, 0.6);
            border: 1px solid rgba(74, 222, 128, 0.3);
            border-radius: 12px;
            padding: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
            transition: all 0.3s ease;
        }

        .status-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(74, 222, 128, 0.2);
        }

        .status-icon {
            font-size: 24px;
            background: rgba(74, 222, 128, 0.1);
            padding: 15px;
            border-radius: 12px;
        }

        .status-info h3 {
            color: #4ade80;
            font-size: 16px;
            margin-bottom: 5px;
        }

        .status-info p {
            color: #e2e8f0;
            font-size: 14px;
            margin-bottom: 5px;
        }

        .status-badge {
            font-size: 12px;
            padding: 4px 8px;
            border-radius: 20px;
            font-weight: bold;
        }

        .status-badge.active {
            background: rgba(74, 222, 128, 0.2);
            color: #4ade80;
        }

        .status-badge.warning {
            background: rgba(251, 191, 36, 0.2);
            color: #fbbf24;
        }

        .status-badge.success {
            background: rgba(34, 211, 238, 0.2);
            color: #22d3ee;
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .dashboard-card {
            background: rgba(0, 0, 0, 0.6);
            border: 1px solid rgba(74, 222, 128, 0.3);
            border-radius: 12px;
            padding: 20px;
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .dashboard-card h2 {
            color: #4ade80;
            font-size: 18px;
            margin-bottom: 15px;
        }

        .refresh-btn {
            background: none;
            border: none;
            color: #4ade80;
            font-size: 18px;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .refresh-btn:hover {
            transform: rotate(180deg);
        }

        .activity-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .activity-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .activity-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
        }

        .activity-dot.green { background: #4ade80; }
        .activity-dot.yellow { background: #fbbf24; }
        .activity-dot.red { background: #ef4444; }

        .activity-content p {
            color: #e2e8f0;
            font-size: 14px;
            margin-bottom: 2px;
        }

        .activity-content span {
            color: #94a3b8;
            font-size: 12px;
        }

        .action-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
        }

        .action-btn {
            background: rgba(74, 222, 128, 0.1);
            border: 1px solid rgba(74, 222, 128, 0.3);
            border-radius: 8px;
            padding: 15px;
            color: #4ade80;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
        }

        .action-btn:hover {
            background: rgba(74, 222, 128, 0.2);
            transform: translateY(-2px);
        }

        .action-icon {
            font-size: 24px;
        }

        .performance-stats {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .stat-item {
            margin-bottom: 10px;
        }

        .stat-label {
            color: #e2e8f0;
            font-size: 14px;
            margin-bottom: 5px;
        }

        .stat-bar {
            background: rgba(74, 222, 128, 0.1);
            border-radius: 20px;
            height: 8px;
            overflow: hidden;
        }

        .stat-fill {
            background: linear-gradient(45deg, #4ade80, #22d3ee);
            height: 100%;
            border-radius: 20px;
            transition: width 0.3s ease;
            text-align: right;
            font-size: 12px;
            color: transparent;
        }

        .task-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .task-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            background: rgba(0, 0, 0, 0.4);
            border-radius: 8px;
        }

        .task-item label {
            color: #e2e8f0;
            font-size: 14px;
            flex: 1;
        }

        .task-badge {
            background: rgba(74, 222, 128, 0.2);
            color: #4ade80;
            padding: 4px 8px;
            border-radius: 20px;
            font-size: 12px;
        }

        .task-badge.urgent {
            background: rgba(239, 68, 68, 0.2);
            color: #ef4444;
        }

        /* Add this CSS for the duplicated questions */
        .questions-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        /* Hide original questions container */
        .questions-container.original {
            display: none;
        }

        /* Add this to your existing CSS */
.unit-chat-section {
    background: rgba(0, 0, 0, 0.4);
    border-radius: 10px;
    margin-top: 15px;
    overflow: hidden;
}

.unit-chat-tabs {
    display: flex;
    background: rgba(0, 0, 0, 0.6);
    padding: 10px;
    gap: 10px;
}

.unit-chat-tab {
    padding: 8px 16px;
    background: transparent;
    border: 1px solid rgba(74, 222, 128, 0.3);
    border-radius: 5px;
    color: #4ade80;
    cursor: pointer;
    font-size: 12px;
    text-transform: uppercase;
}

.unit-chat-tab.active {
    background: #4ade80;
    color: #000;
}

.unit-content {
    display: none;
    padding: 15px;
}

.unit-content.active {
    display: block;
}

.senior-question {
    background: rgba(0, 0, 0, 0.6);
    border: 1px solid rgba(74, 222, 128, 0.3);
    border-radius: 8px;
    padding: 15px;
    margin-bottom: 15px;
}

.question-header {
    display: flex;
    justify-content: space-between;
    margin-bottom: 10px;
}

.question-title {
    color: #4ade80;
    font-weight: bold;
}

.question-meta {
    color: #94a3b8;
    font-size: 0.9em;
}

.question-body {
    color: #e2e8f0;
    margin-bottom: 15px;
}

.question-response {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.response-input {
    background: rgba(0, 0, 0, 0.4);
    border: 1px solid rgba(74, 222, 128, 0.3);
    border-radius: 5px;
    padding: 10px;
    color: #fff;
    resize: vertical;
    min-height: 60px;
}

.response-btn {
    align-self: flex-end;
    background: #4ade80;
    color: #000;
    border: none;
    border-radius: 5px;
    padding: 8px 16px;
    cursor: pointer;
}

.chat-history {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.chat-message {
    background: rgba(0, 0, 0, 0.4);
    border-radius: 8px;
    padding: 10px;
}

.chat-message.senior {
    border-left: 3px solid #4ade80;
}

.message-header {
    display: flex;
    justify-content: space-between;
    margin-bottom: 5px;
}

.sender {
    color: #4ade80;
    font-weight: bold;
}

.time {
    color: #94a3b8;
    font-size: 0.9em;
}

.message-content {
    color: #e2e8f0;
}

.read-only .chat-message {
    opacity: 0.8;
    pointer-events: none;
}
    </style>
</head>
<body>
    <div class="header">
        <div class="logo">SecureComm Command</div>

        <div class="header-center">
            <div class="approval-indicator">
                <span id="approvalCount">3</span> Pending Approvals
            </div>
            <button class="nav-btn" onclick="showApprovals()">Review</button>
        </div>

        <div class="user-profile">
            <div class="profile-photo">ðŸ‘¤</div>
            <div class="user-info">
                <div class="user-name">CDR. SAI SHOBANA SRI .H</div>
                <div class="user-details">ML-123456789 | Special Forces | SF-001</div>
            </div>
        </div>
    </div>

    <div class="main-container">
        <div class="left-sidebar">
            <div class="sidebar-header">
                <input type="text" class="search-input" placeholder="SEARCH QUESTIONS...">
                <div class="sidebar-title">Public Questions</div>
            </div>

            <div class="questions-scroll">
                <div class="questions-container original">
                    <div class="question-item">
                        <div class="question-text">Equipment Maintenance Protocols</div>
                        <div class="question-meta">
                            <span>SESS_A1B2C3</span>
                            <span>2 hrs ago</span>
                        </div>
                        <button class="answer-btn" onclick="event.stopPropagation(); openAnswerModal('Equipment Maintenance', 'SESS_A1B2C3')">Answer</button>
                    </div>

                    <div class="question-item">
                        <div class="question-text">Combat Readiness Standards</div>
                        <div class="question-meta">
                            <span>SESS_K8L9M0</span>
                            <span>6 hrs ago</span>
                        </div>
                        <button class="answer-btn" onclick="event.stopPropagation(); openAnswerModal('Combat Readiness', 'SESS_K8L9M0')">Answer</button>
                    </div>

                    <div class="question-item">
                        <div class="question-text">Security Clearance Renewal Process</div>
                        <div class="question-meta">
                            <span>SESS_M5N6O7</span>
                            <span>1 day ago</span>
                        </div>
                        <button class="answer-btn" onclick="event.stopPropagation(); openAnswerModal('Security Clearance', 'SESS_M5N6O7')">Answer</button>
                    </div>

                    <div class="question-item">
                        <div class="question-text">Emergency Response Protocols</div>
                        <div class="question-meta">
                            <span>SESS_X9Y8Z7</span>
                            <span>5 hrs ago</span>
                        </div>
                        <button class="answer-btn" onclick="event.stopPropagation(); openAnswerModal('Emergency Response', 'SESS_X9Y8Z7')">Answer</button>
                    </div>

                    <div class="question-item">
                        <div class="question-text">Communication Encryption Standards</div>
                        <div class="question-meta">
                            <span>SESS_P8Q9R0</span>
                            <span>3 hrs ago</span>
                        </div>
                        <button class="answer-btn" onclick="event.stopPropagation(); openAnswerModal('Encryption Standards', 'SESS_P8Q9R0')">Answer</button>
                    </div>
                </div>

                <div class="questions-container">
                    <div class="question-item">
                        <div class="question-text">Equipment Maintenance Protocols</div>
                        <div class="question-meta">
                            <span>SESS_A1B2C3</span>
                            <span>2 hrs ago</span>
                        </div>
                        <button class="answer-btn" onclick="event.stopPropagation(); openAnswerModal('Equipment Maintenance', 'SESS_A1B2C3')">Answer</button>
                    </div>

                    <div class="question-item">
                        <div class="question-text">Combat Readiness Standards</div>
                        <div class="question-meta">
                            <span>SESS_K8L9M0</span>
                            <span>6 hrs ago</span>
                        </div>
                        <button class="answer-btn" onclick="event.stopPropagation(); openAnswerModal('Combat Readiness', 'SESS_K8L9M0')">Answer</button>
                    </div>

                    <div class="question-item">
                        <div class="question-text">Security Clearance Renewal Process</div>
                        <div class="question-meta">
                            <span>SESS_M5N6O7</span>
                            <span>1 day ago</span>
                        </div>
                        <button class="answer-btn" onclick="event.stopPropagation(); openAnswerModal('Security Clearance', 'SESS_M5N6O7')">Answer</button>
                    </div>

                    <div class="question-item">
                        <div class="question-text">Emergency Response Protocols</div>
                        <div class="question-meta">
                            <span>SESS_X9Y8Z7</span>
                            <span>5 hrs ago</span>
                        </div>
                        <button class="answer-btn" onclick="event.stopPropagation(); openAnswerModal('Emergency Response', 'SESS_X9Y8Z7')">Answer</button>
                    </div>

                    <div class="question-item">
                        <div class="question-text">Communication Encryption Standards</div>
                        <div class="question-meta">
                            <span>SESS_P8Q9R0</span>
                            <span>3 hrs ago</span>
                        </div>
                        <button class="answer-btn" onclick="event.stopPropagation(); openAnswerModal('Encryption Standards', 'SESS_P8Q9R0')">Answer</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="main-content">
            <div class="content-tabs">
                <button class="tab-btn active" onclick="switchTab(event, 'dashboard')">Dashboard</button>
                <button class="tab-btn" onclick="switchTab(event, 'chat')">Chat</button>
                <button class="tab-btn" onclick="switchTab(event, 'hierarchy')">Hierarchy</button>
                <button class="tab-btn" onclick="switchTab(event, 'stego')">StegoSecure</button>
            </div>

            <div class="tab-content active" id="dashboard">
                <div class="dashboard-container">
                    <div class="dashboard-section welcome-section">
                        <div class="welcome-header">
                            <h1>Welcome, CDR. Sai Shobana Sri .H</h1>
                            <p class="timestamp">Last login: July 28, 2025 | 09:45 AM</p>
                        </div>
                        <div class="status-cards">
                            <div class="status-card">
                                <div class="status-icon">ðŸŽ¯</div>
                                <div class="status-info">
                                    <h3>Mission Status</h3>
                                    <p>Operation Green Shield</p>
                                    <span class="status-badge active">Active</span>
                                </div>
                            </div>
                            <div class="status-card">
                                <div class="status-icon">âš¡</div>
                                <div class="status-info">
                                    <h3>Alert Level</h3>
                                    <p>DefCon 3</p>
                                    <span class="status-badge warning">Elevated</span>
                                </div>
                            </div>
                            <div class="status-card">
                                <div class="status-icon">ðŸ‘¥</div>
                                <div class="status-info">
                                    <h3>Team Status</h3>
                                    <p>15/15 Members</p>
                                    <span class="status-badge success">Operational</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="dashboard-grid">
                        <div class="dashboard-card activity-feed">
                            <div class="card-header">
                                <h2>Recent Activity</h2>
                                <button class="refresh-btn">â†»</button>
                            </div>
                            <div class="activity-list">
                                <div class="activity-item">
                                    <div class="activity-dot green"></div>
                                    <div class="activity-content">
                                        <p>New mission briefing uploaded</p>
                                        <span>10 minutes ago</span>
                                    </div>
                                </div>
                                <div class="activity-item">
                                    <div class="activity-dot yellow"></div>
                                    <div class="activity-content">
                                        <p>Equipment maintenance scheduled</p>
                                        <span>1 hour ago</span>
                                    </div>
                                </div>
                                <div class="activity-item">
                                    <div class="activity-dot red"></div>
                                    <div class="activity-content">
                                        <p>Security protocol update required</p>
                                        <span>2 hours ago</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="dashboard-card quick-actions">
                            <h2>Quick Actions</h2>
                            <div class="action-buttons">
                                <button class="action-btn">
                                    <span class="action-icon">ðŸ“‹</span>
                                    New Report
                                </button>
                                <button class="action-btn">
                                    <span class="action-icon">ðŸ”’</span>
                                    Security Check
                                </button>
                                <button class="action-btn">
                                    <span class="action-icon">ðŸ“¢</span>
                                    Broadcast
                                </button>
                                <button class="action-btn">
                                    <span class="action-icon">âš¡</span>
                                    Emergency
                                </button>
                            </div>
                        </div>

                        <div class="dashboard-card performance">
                            <h2>Team Performance</h2>
                            <div class="performance-stats">
                                <div class="stat-item">
                                    <div class="stat-label">Efficiency</div>
                                    <div class="stat-bar">
                                        <div class="stat-fill" style="width: 85%;">85%</div>
                                    </div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-label">Response Time</div>
                                    <div class="stat-bar">
                                        <div class="stat-fill" style="width: 92%;">92%</div>
                                    </div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-label">Mission Success</div>
                                    <div class="stat-bar">
                                        <div class="stat-fill" style="width: 78%;">78%</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="tab-content" id="chat">
                <div class="chat-container">
                    <div class="chat-list">
                        <div class="search-section">
                            <input type="text" class="search-input" placeholder="Search contacts or messages...">
                        </div>
                        <div class="chat-items">
                            </div>
                    </div>

                    <div class="chat-window" style="display: none;">
                        <div class="chat-header">
                            <div class="chat-header-info">
                                <div class="chat-title">Chat with John Doe</div>
                                <div class="chat-status">Online</div>
                            </div>
                        </div>

                        <div class="chat-messages">
                            </div>

                        <div class="chat-input-section">
                            <div class="chat-input-container">
                                <textarea class="chat-input" placeholder="Type your message..."></textarea>
                                <button class="send-btn">Send</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="tab-content" id="hierarchy">
                <div class="hierarchy-content">
                    <div class="hierarchy-header">
                        <div class="hierarchy-title">Unit Hierarchy</div>
                        <button class="post-question-btn" onclick="openPostQuestionModal()">Post Question</button>
                    </div>

                    <div class="hierarchy-item senior-unit" onclick="toggleUnitDetails('sf', true)">
                        <div class="unit-info">
                            <div class="unit-badge">SF</div>
                            <div class="unit-name">
                                Special Forces
                                <span class="senior-badge">Senior Unit</span>
                            </div>
                        </div>
                        <div class="hierarchy-meta">
                            <div>Top Secret Clearance</div>
                            <div>CDR. MICHAEL PARKER</div>
                        </div>
                        <div id="unit-sf-details" class="unit-details">
                            <div id="unit-sf-answer" class="unit-answer-form">
                                <textarea class="form-textarea" placeholder="Provide guidance or answer..."></textarea>
                                <button class="form-btn submit">Submit Response</button>
                            </div>
                        </div>
                    </div>

                    <div class="hierarchy-item" onclick="toggleUnitDetails('rd', false)">
                        <div class="unit-info">
                            <div class="unit-badge">R&D</div>
                            <div class="unit-name">Research & Development</div>
                        </div>
                        <div class="hierarchy-meta">
                            <div>Confidential Clearance</div>
                            <div>COL. RICK GRIMES</div>
                        </div>
                        <div id="unit-rd-details" class="unit-details">
                            <div id="unit-rd-conversations" class="unit-conversations"></div>
                        </div>
                    </div>

                    <div class="hierarchy-item" onclick="toggleUnitDetails('log', false)">
                        <div class="unit-info">
                            <div class="unit-badge">LOG</div>
                            <div class="unit-name">Logistics</div>
                        </div>
                        <div class="hierarchy-meta">
                            <div>Unclassified</div>
                            <div>MAJ. DARYL DIXON</div>
                        </div>
                        <div id="unit-log-details" class="unit-details">
                            <div id="unit-log-conversations" class="unit-conversations"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="tab-content" id="stego">
                <div class="stego-container">
                    <h1>ðŸ”’ StegoSecure</h1>
                    <p class="stego-slogan">
                        Advanced Steganography + AES Encryption Tool
                    </p>

                    <div class="stego-sub-tabs">
                        <button class="stego-sub-tab active" onclick="switchStegoContent(event, 'encode')">ðŸ”’ Encode & Hide</button>
                        <button class="stego-sub-tab" onclick="switchStegoContent(event, 'decode')">ðŸ”“ Extract & Decrypt</button>
                    </div>

                    <div id="encode" class="stego-tab-content active">
                        <div class="stego-section">
                            <h2>Encode Message in Image</h2>
                            <div class="stego-info">
                                <strong>Process:</strong> Your message will be AES encrypted, then hidden inside your cover image using LSB steganography.
                            </div>

                            <div class="step-indicator">
                                <div class="step active" id="step1">1. Message</div>
                                <div class="step" id="step2">2. Password</div>
                                <div class="step" id="step3">3. Image</div>
                                <div class="step" id="step4">4. Process</div>
                            </div>

                            <div class="form-group">
                                <label for="message" class="form-label">Secret Message:</label>
                                <textarea id="message" class="form-textarea" placeholder="Enter your secret message here..." rows="4"></textarea>
                            </div>

                            <div class="form-group">
                                <label for="password" class="form-label">Encryption Password:</label>
                                <input type="password" id="password" class="form-password" placeholder="Enter a strong password for encryption...">
                            </div>

                            <div class="form-group">
                                <label for="coverImage" class="form-label">Cover Image (PNG/JPG):</label>
                                <input type="file" id="coverImage" accept="image/*" style="display: none;">
                                <div class="custom-file-input" onclick="document.getElementById('coverImage').click()">
                                    Click to select an image or drag and drop
                                </div>
                            </div>

                            <div class="btn-group">
                                <button class="stego-btn primary" onclick="processEncode()">Encrypt & Hide</button>
                                <button class="stego-btn clear" onclick="clearEncode()">Clear</button>
                            </div>

                            <div class="progress-bar" id="encodeProgress" style="display: none;">
                                <div class="progress-fill" id="encodeProgressFill"></div>
                            </div>

                            <div class="preview-container" id="encodePreview" style="display: none;">
                                <div class="preview-box">
                                    <h3>Original Image</h3>
                                    <img id="originalPreview" alt="Original">
                                </div>
                                <div class="preview-box">
                                    <h3>Stego Image</h3>
                                    <img id="stegoPreview" alt="Stego">
                                    <br>
                                    <button class="stego-btn download" id="downloadBtn" onclick="downloadStegoImage()">
                                        Download Image
                                    </button>
                                </div>
                            </div>

                            <div id="encodeResult"></div>
                        </div>
                    </div>

                    <div id="decode" class="stego-tab-content">
                        <div class="stego-section">
                            <h2>Extract & Decrypt from Image</h2>
                            <div class="stego-info">
                                <strong>Process:</strong> Upload your stego image and enter the password to extract and decrypt the hidden message.
                            </div>

                            <div class="form-group">
                                <label for="stegoImage" class="form-label">Stego Image:</label>
                                <input type="file" id="stegoImage" accept="image/*" style="display:none;">
                                <div class="custom-file-input" onclick="document.getElementById('stegoImage').click()">
                                    Click to select an image or drag and drop
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="decryptPassword" class="form-label">Decryption Password:</label>
                                <input type="password" id="decryptPassword" class="form-password" placeholder="Enter the password used for encryption...">
                            </div>

                            <div class="btn-group">
                                <button class="stego-btn secondary" onclick="processDecode()">Extract & Decrypt</button>
                                <button class="stego-btn clear" onclick="clearDecode()">Clear</button>
                            </div>

                            <div class="progress-bar" id="decodeProgress" style="display: none;">
                                <div class="progress-fill" id="decodeProgressFill"></div>
                            </div>

                            <div id="decodeResult"></div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <script>
        let stegoImageData = null;

        // Main Tab switching
        function switchTab(event, tabId) {
            document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            
            document.getElementById(tabId).classList.add('active');
            event.currentTarget.classList.add('active');
            
            if (tabId === 'chat' && !document.querySelector('.chat-items').children.length) {
                initializeChat();
            }
        }
        
        // StegoSecure Tab switching
        function switchStegoContent(event, tabName) {
            document.querySelectorAll('.stego-tab-content').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.stego-sub-tab').forEach(tab => tab.classList.remove('active'));

            document.getElementById(tabName).classList.add('active');
            event.currentTarget.classList.add('active');
        }

        // =================================== //
        // STEGOSECURE JAVASCRIPT LOGIC START  //
        // =================================== //

        async function generateKey(password, salt) {
            const encoder = new TextEncoder();
            const keyMaterial = await crypto.subtle.importKey(
                'raw',
                encoder.encode(password),
                'PBKDF2',
                false,
                ['deriveBits', 'deriveKey']
            );
            
            return crypto.subtle.deriveKey(
                {
                    name: 'PBKDF2',
                    salt: salt,
                    iterations: 100000,
                    hash: 'SHA-256'
                },
                keyMaterial,
                { name: 'AES-GCM', length: 256 },
                false,
                ['encrypt', 'decrypt']
            );
        }

        async function encryptMessage(message, password) {
            const salt = crypto.getRandomValues(new Uint8Array(16));
            const iv = crypto.getRandomValues(new Uint8Array(12));
            
            const key = await generateKey(password, salt);
            
            const encoder = new TextEncoder();
            const encrypted = await crypto.subtle.encrypt(
                { name: 'AES-GCM', iv: iv },
                key,
                encoder.encode(message)
            );
            
            const combined = new Uint8Array(salt.length + iv.length + encrypted.byteLength);
            combined.set(salt, 0);
            combined.set(iv, salt.length);
            combined.set(new Uint8Array(encrypted), salt.length + iv.length);
            
            return combined;
        }

        async function decryptMessage(encryptedData, password) {
            const salt = encryptedData.slice(0, 16);
            const iv = encryptedData.slice(16, 28);
            const encrypted = encryptedData.slice(28);
            
            const key = await generateKey(password, salt);
            
            const decrypted = await crypto.subtle.decrypt(
                { name: 'AES-GCM', iv: iv },
                key,
                encrypted
            );
            
            const decoder = new TextDecoder();
            return decoder.decode(decrypted);
        }

        function hideDataInImage(imageData, data) {
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = imageData.width;
            canvas.height = imageData.height;
            
            ctx.drawImage(imageData.image, 0, 0);
            const newImageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
            const pixels = newImageData.data;
            
            const dataArray = Array.from(data);
            const lengthBinary = dataArray.length.toString(2).padStart(32, '0');
            const dataBinary = dataArray.map(byte => byte.toString(2).padStart(8, '0')).join('');
            const endMarker = '1111111111111110'; 
            const fullBinary = lengthBinary + dataBinary + endMarker;
            
            if (fullBinary.length > pixels.length) {
                throw new Error('Image too small to hide this amount of data');
            }
            
            for (let i = 0; i < fullBinary.length; i++) {
                pixels[i] = (pixels[i] & 0xFE) | parseInt(fullBinary[i]);
            }
            
            ctx.putImageData(newImageData, 0, 0);
            
            return canvas;
        }

        function extractDataFromImage(imageData) {
            const pixels = imageData.data;
            
            let lengthBinary = '';
            for (let i = 0; i < 32; i++) {
                lengthBinary += (pixels[i] & 1).toString();
            }
            const dataLength = parseInt(lengthBinary, 2);
            
            if (dataLength <= 0 || dataLength > (pixels.length - 32) / 8) {
                throw new Error('Invalid data length or no hidden data found');
            }
            
            let dataBinary = '';
            for (let i = 32; i < 32 + (dataLength * 8); i++) {
                dataBinary += (pixels[i] & 1).toString();
            }
            
            const dataBytes = [];
            for (let i = 0; i < dataBinary.length; i += 8) {
                dataBytes.push(parseInt(dataBinary.substr(i, 8), 2));
            }
            
            return new Uint8Array(dataBytes);
        }

        async function processEncode() {
            const message = document.getElementById('message').value;
            const password = document.getElementById('password').value;
            const coverImageFile = document.getElementById('coverImage').files[0];
            const resultDiv = document.getElementById('encodeResult');
            const progressBar = document.getElementById('encodeProgress');
            const progressFill = document.getElementById('encodeProgressFill');
            
            resultDiv.innerHTML = '';
            if (!message || !password || !coverImageFile) {
                resultDiv.innerHTML = '<div class="stego-result error">Please fill all fields and upload an image!</div>';
                return;
            }

            try {
                progressBar.style.display = 'block';
                updateProgress(progressFill, 10);
                updateSteps(2);

                const encryptedData = await encryptMessage(message, password);
                updateProgress(progressFill, 40);
                updateSteps(3);

                const img = new Image();
                img.onload = async function() {
                    try {
                        const canvas = document.createElement('canvas');
                        const ctx = canvas.getContext('2d');
                        canvas.width = img.width;
                        canvas.height = img.height;
                        
                        ctx.drawImage(img, 0, 0);
                        const imageData = {
                            image: img,
                            data: ctx.getImageData(0, 0, canvas.width, canvas.height).data,
                            width: img.width,
                            height: img.height
                        };
                        
                        updateProgress(progressFill, 70);
                        updateSteps(4);

                        const stegoCanvas = hideDataInImage(imageData, encryptedData);
                        updateProgress(progressFill, 100);

                        document.getElementById('originalPreview').src = URL.createObjectURL(coverImageFile);
                        document.getElementById('stegoPreview').src = stegoCanvas.toDataURL();
                        document.getElementById('encodePreview').style.display = 'flex';

                        stegoCanvas.toBlob(function(blob) {
                            stegoImageData = blob;
                        });

                        resultDiv.innerHTML = '<div class="stego-result success">âœ… Message successfully encrypted and hidden!</div>';
                        updateSteps(5); // 5 indicates completion
                        
                    } catch (error) {
                        resultDiv.innerHTML = `<div class="stego-result error">âŒ Error processing image: ${error.message}</div>`;
                        progressBar.style.display = 'none';
                    }
                };
                
                img.onerror = function() {
                    resultDiv.innerHTML = '<div class="stego-result error">âŒ Error loading image. Please try a different image.</div>';
                    progressBar.style.display = 'none';
                };
                
                img.src = URL.createObjectURL(coverImageFile);
                
            } catch (error) {
                resultDiv.innerHTML = `<div class="stego-result error">âŒ Encryption failed: ${error.message}</div>`;
                progressBar.style.display = 'none';
            }
        }

        async function processDecode() {
            const stegoImageFile = document.getElementById('stegoImage').files[0];
            const password = document.getElementById('decryptPassword').value;
            const resultDiv = document.getElementById('decodeResult');
            const progressBar = document.getElementById('decodeProgress');
            const progressFill = document.getElementById('decodeProgressFill');
            
            resultDiv.innerHTML = '';
            if (!stegoImageFile || !password) {
                resultDiv.innerHTML = '<div class="stego-result error">Please upload a stego image and enter the password!</div>';
                return;
            }

            try {
                progressBar.style.display = 'block';
                updateProgress(progressFill, 25);

                const img = new Image();
                img.onload = async function() {
                    try {
                        const canvas = document.createElement('canvas');
                        const ctx = canvas.getContext('2d');
                        canvas.width = img.width;
                        canvas.height = img.height;
                        
                        ctx.drawImage(img, 0, 0);
                        const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
                        
                        updateProgress(progressFill, 50);

                        const extractedData = extractDataFromImage(imageData);
                        updateProgress(progressFill, 75);

                        const decryptedMessage = await decryptMessage(extractedData, password);
                        updateProgress(progressFill, 100);

                        resultDiv.innerHTML = `
                            <div class="stego-result success">
                                <strong>âœ… Message Extracted & Decrypted!</strong><br><br>
                                <strong>MESSAGE:</strong><br>
                                <div style="background: rgba(0,0,0,0.5); padding: 15px; border-radius: 8px; margin-top: 10px; color: #e2e8f0; font-family: 'Courier New', monospace;">
                                    ${decryptedMessage.replace(/</g, "&lt;").replace(/>/g, "&gt;")}
                                </div>
                                <button class="copy-btn" onclick="copyToClipboard(this, '${decryptedMessage.replace(/'/g, "\\'")}')">COPY</button>
                            </div>
                        `;
                        
                    } catch (error) {
                        resultDiv.innerHTML = '<div class="stego-result error">âŒ Decryption failed: Wrong password or corrupted image!</div>';
                        progressBar.style.display = 'none';
                    }
                };
                
                img.onerror = function() {
                    resultDiv.innerHTML = '<div class="stego-result error">âŒ Error loading image. Please try a different image.</div>';
                    progressBar.style.display = 'none';
                };
                
                img.src = URL.createObjectURL(stegoImageFile);
                
            } catch (error) {
                resultDiv.innerHTML = `<div class="stego-result error">âŒ Processing failed: ${error.message}</div>`;
                progressBar.style.display = 'none';
            }
        }

        function updateProgress(progressFill, percentage) {
            progressFill.style.width = percentage + '%';
        }

        function updateSteps(currentStep) {
            for (let i = 1; i <= 4; i++) {
                const step = document.getElementById(`step${i}`);
                if (i < currentStep) {
                    step.className = 'step completed';
                } else if (i === currentStep) {
                    step.className = 'step active';
                } else {
                    step.className = 'step';
                }
            }
        }

        function downloadStegoImage() {
            if (stegoImageData) {
                const a = document.createElement('a');
                a.href = URL.createObjectURL(stegoImageData);
                a.download = 'stego_image.png';
                a.click();
            }
        }

        function copyToClipboard(button, text) {
            navigator.clipboard.writeText(text).then(() => {
                button.textContent = 'COPIED!';
                setTimeout(() => { button.textContent = 'COPY'; }, 2000);
            });
        }

        function clearEncode() {
            document.getElementById('message').value = '';
            document.getElementById('password').value = '';
            document.getElementById('coverImage').value = '';
            document.getElementById('encodeResult').innerHTML = '';
            document.getElementById('encodePreview').style.display = 'none';
            document.getElementById('encodeProgress').style.display = 'none';
            stegoImageData = null;
            updateSteps(1);
        }

        function clearDecode() {
            document.getElementById('stegoImage').value = '';
            document.getElementById('decryptPassword').value = '';
            document.getElementById('decodeResult').innerHTML = '';
            document.getElementById('decodeProgress').style.display = 'none';
        }


        // =================================== //
        //  STEGOSECURE JAVASCRIPT LOGIC END   //
        // =================================== //


        // Add this to your existing JavaScript
        document.addEventListener('DOMContentLoaded', function() {
            // Duplicate questions for seamless scrolling
            const questionsContainer = document.querySelector('.questions-container');
            const originalContent = questionsContainer.innerHTML;
            questionsContainer.innerHTML = originalContent + originalContent;

            // Pause animation on hover
            document.querySelector('.questions-scroll').addEventListener('mouseenter', function() {
                document.querySelector('.questions-container').style.animationPlayState = 'paused';
            });

            document.querySelector('.questions-scroll').addEventListener('mouseleave', function() {
                document.querySelector('.questions-container').style.animationPlayState = 'running';
            });

            // Search functionality
            const searchInput = document.querySelector('.sidebar-header .search-input');
            searchInput.addEventListener('input', function(e) {
                const searchTerm = e.target.value.toLowerCase();
                const questions = document.querySelectorAll('.question-item');

                questions.forEach(question => {
                    const text = question.querySelector('.question-text').textContent.toLowerCase();
                    if (text.includes(searchTerm)) {
                        question.style.display = 'block';
                    } else {
                        question.style.display = 'none';
                    }
                });
            });
        });

        // Add these functions to your existing JavaScript
        function openAnswerModal(questionText, sessionId) {
            document.getElementById('answerPopup').style.display = 'flex';
            document.getElementById('selectedQuestion').textContent = questionText;
            document.getElementById('sessionId').textContent = sessionId;
        }

        function closeAnswerPopup() {
            document.getElementById('answerPopup').style.display = 'none';
            document.getElementById('answerText').value = '';
        }

        function submitAnswer() {
            const answerText = document.getElementById('answerText').value.trim();
            const questionText = document.getElementById('selectedQuestion').textContent;
            const sessionId = document.getElementById('sessionId').textContent;

            if (answerText) {
                // Here you would typically send the answer to your backend
                alert(`ðŸŽ–ï¸ SUCCESS: Answer Submitted!\nQuestion: ${questionText}\nSession: ${sessionId}`);
                closeAnswerPopup();
            } else {
                alert('âš ï¸ Please enter an answer before submitting.');
            }
        }

        // Update existing question items to use the new modal
        document.querySelectorAll('.answer-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                e.stopPropagation();
                const questionCard = e.target.closest('.question-item');
                const questionText = questionCard.querySelector('.question-text').textContent;
                const sessionId = questionCard.querySelector('.question-meta span').textContent;
                openAnswerModal(questionText, sessionId);
            });
        });

        // Sample approval data
        let approvals = [
            {
                id: 1,
                title: "Access Request",
                content: "Request for access to classified documents - Level 3",
                requester: "LT. John Smith",
                time: "2 hours ago"
            },
            {
                id: 2,
                title: "Equipment Requisition",
                content: "Request for advanced communication equipment - Priority High",
                requester: "CPT. Sarah Johnson",
                time: "5 hours ago"
            },
            {
                id: 3,
                title: "Personnel Transfer",
                content: "Request for transfer to Special Operations Unit",
                requester: "SGT. Mike Wilson",
                time: "1 day ago"
            }
        ];

        let pendingCount = approvals.length;

        function updateApprovalCount() {
            document.getElementById('approvalCount').textContent = pendingCount;
            if (pendingCount === 0) {
                document.querySelector('.approval-indicator').style.display = 'none';
            }
        }

        function showApprovals() {
            const modal = document.getElementById('reviewModal');
            const approvalsList = document.getElementById('approvalsList');
            approvalsList.innerHTML = ''; // Clear existing items

            approvals.forEach(approval => {
                const approvalItem = document.createElement('div');
                approvalItem.className = 'approval-item';
                approvalItem.innerHTML = `
            <div class="approval-header">
                <div class="approval-title">${approval.title}</div>
                <div class="approval-meta">${approval.requester} - ${approval.time}</div>
            </div>
            <div class="approval-content">${approval.content}</div>
            <div class="approval-actions">
                <button class="approval-btn approve-btn" onclick="handleApproval(${approval.id}, true)">
                    Approve
                </button>
                <button class="approval-btn reject-btn" onclick="handleApproval(${approval.id}, false)">
                    Reject
                </button>
            </div>
        `;
                approvalsList.appendChild(approvalItem);
            });

            modal.style.display = 'block';
        }

        function closeReviewModal() {
            document.getElementById('reviewModal').style.display = 'none';
        }

        function handleApproval(id, isApproved) {
            // Remove the approval from the list
            approvals = approvals.filter(approval => approval.id !== id);
            pendingCount--;
            updateApprovalCount();

            // Show success message
            const action = isApproved ? 'approved' : 'rejected';
            alert(`Request ${action} successfully!`);

            // Refresh the approvals list
            showApprovals();

            // If no more approvals, close the modal
            if (approvals.length === 0) {
                closeReviewModal();
            }
        }

        // Chat functionality
        const chatData = {
            contacts: [
                { id: 1, name: 'John Smith', role: 'Lieutenant', lastMessage: 'Mission status update required', time: '10:30 AM', avatar: 'JS' },
                { id: 2, name: 'Sarah Connor', role: 'Captain', lastMessage: 'Equipment check complete', time: '09:15 AM', avatar: 'SC' },
                { id: 3, name: 'Mike Ross', role: 'Sergeant', lastMessage: 'Patrol report submitted', time: 'Yesterday', avatar: 'MR' }
            ],
            messages: {}
        };

        // Initialize chat interface
        function initializeChat() {
            const chatList = document.querySelector('.chat-items');
            const chatWindow = document.querySelector('.chat-window');

            // Populate chat list
            chatData.contacts.forEach(contact => {
                const chatItem = createChatItem(contact);
                chatList.appendChild(chatItem);
            });

            // Initialize empty message arrays for each contact
            chatData.contacts.forEach(contact => {
                chatData.messages[contact.id] = [];
            });

            // Add event listener for the send button
            const sendBtn = document.querySelector('.send-btn');
            sendBtn.addEventListener('click', sendMessage);

            // Add event listener for Enter key in textarea
            const chatInput = document.querySelector('.chat-input');
            chatInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    sendMessage();
                }
            });
        }

        // Create chat list item
        function createChatItem(contact) {
            const div = document.createElement('div');
            div.className = 'chat-item';
            div.innerHTML = `
        <div class="chat-avatar">${contact.avatar}</div>
        <div class="chat-info">
            <div class="chat-name">${contact.name}</div>
            <div class="chat-preview">${contact.lastMessage}</div>
        </div>
        <div class="chat-time">${contact.time}</div>
    `;
            div.addEventListener('click', () => openChat(contact));
            return div;
        }

        // Open chat window
        function openChat(contact) {
            const chatWindow = document.querySelector('.chat-window');
            const chatTitle = document.querySelector('.chat-title');
            const chatMessages = document.querySelector('.chat-messages');

            // Update chat header
            chatTitle.textContent = `Chat with ${contact.name}`;

            // Clear existing messages
            chatMessages.innerHTML = '';

            // Load messages for this contact
            if (chatData.messages[contact.id]) {
                chatData.messages[contact.id].forEach(msg => {
                    appendMessage(msg.text, msg.sent);
                });
            }

            // Store current contact ID
            chatWindow.dataset.currentContact = contact.id;

            // Show chat window
            chatWindow.style.display = 'flex';
        }

        // Send message
        function sendMessage() {
            const chatInput = document.querySelector('.chat-input');
            const text = chatInput.value.trim();
            const currentContactId = document.querySelector('.chat-window').dataset.currentContact;

            if (text && currentContactId) {
                // Add message to data store
                chatData.messages[currentContactId].push({
                    text: text,
                    sent: true,
                    timestamp: new Date()
                });

                // Append message to chat
                appendMessage(text, true);

                // Clear input
                chatInput.value = '';

                // Simulate reply after 1-3 seconds
                simulateReply(currentContactId);
            }
        }

        // Append message to chat
        function appendMessage(text, sent) {
            const chatMessages = document.querySelector('.chat-messages');
            const div = document.createElement('div');
            div.className = `message ${sent ? 'sent' : 'received'}`;

            const time = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });

            div.innerHTML = `
        ${text}
        <div class="message-time">${time}</div>
    `;

            chatMessages.appendChild(div);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        // Simulate reply
        function simulateReply(contactId) {
            const responses = [
                "Roger that.",
                "Understood, proceeding with operation.",
                "Copy that, will update status shortly.",
                "Affirmative, standing by for further instructions.",
                "Message received, implementing protocols."
            ];

            setTimeout(() => {
                const response = responses[Math.floor(Math.random() * responses.length)];
                chatData.messages[contactId].push({
                    text: response,
                    sent: false,
                    timestamp: new Date()
                });
                appendMessage(response, false);
            }, 1000 + Math.random() * 2000);
        }

        // Hide all unit chats first
        document.querySelectorAll('.unit-chat-section').forEach(chat => {
            chat.style.display = 'none';
        });

        // Show selected unit chat
        const unitChat = document.getElementById(`unit-chat-${unitId}`);
        if (unitChat) {
            unitChat.style.display = 'block';
        }

        // Highlight selected unit
        document.querySelectorAll('.hierarchy-item').forEach(item => {
            item.classList.remove('active');
        });
        document.querySelector(`.hierarchy-item[data-unit="${unitId}"]`).classList.add('active');


        function switchUnitChatTab(unitId, tabType) {
            const tabs = document.querySelectorAll(`#unit-chat-${unitId} .unit-chat-tab`);
            const contents = document.querySelectorAll(`#unit-chat-${unitId} .unit-chat-content`);

            tabs.forEach(tab => tab.classList.remove('active'));
            contents.forEach(content => content.style.display = 'none');

            document.querySelector(`#unit-chat-${unitId} .unit-chat-tab[data-type="${tabType}"]`).classList.add('active');
            document.querySelector(`#unit-chat-${unitId} .unit-chat-content[data-type="${tabType}"]`).style.display = 'block';
        }

        /* Hierarchy Functions */
        function createHierarchyStructure() {
            const hierarchyContent = document.querySelector('.hierarchy-content');
            hierarchyContent.innerHTML = `
        <div class="hierarchy-header">
            <div class="hierarchy-title">Unit Hierarchy</div>
            <button class="post-question-btn" onclick="openPostQuestionModal()">Post Question</button>
        </div>

        <div class="hierarchy-item senior-unit" onclick="toggleUnitDetails('sf', true)">
            <div class="unit-info">
                <div class="unit-badge">SF</div>
                <div class="unit-name">
                    Special Forces
                    <span class="senior-badge">Senior Unit</span>
                </div>
            </div>
            <div class="hierarchy-meta">
                <div>Top Secret Clearance</div>
                <div>CDR. MICHAEL PARKER</div>
            </div>
            <div id="unit-sf-details" class="unit-details">
                <div id="unit-sf-answer" class="unit-answer-form">
                    <textarea class="form-textarea" placeholder="Provide guidance or answer..."></textarea>
                    <button class="form-btn submit">Submit Response</button>
                </div>
            </div>
        </div>

        <div class="hierarchy-item" onclick="toggleUnitDetails('rd', false)">
            <div class="unit-info">
                <div class="unit-badge">R&D</div>
                <div class="unit-name">Research & Development</div>
            </div>
            <div class="hierarchy-meta">
                <div>Confidential Clearance</div>
                <div>COL. RICK GRIMES</div>
            </div>
            <div id="unit-rd-details" class="unit-details">
                <div id="unit-rd-conversations" class="unit-conversations"></div>
            </div>
        </div>

        <div class="hierarchy-item" onclick="toggleUnitDetails('log', false)">
            <div class="unit-info">
                <div class="unit-badge">LOG</div>
                <div class="unit-name">Logistics</div>
            </div>
            <div class="hierarchy-meta">
                <div>Unclassified</div>
                <div>MAJ. DARYL DIXON</div>
            </div>
            <div id="unit-log-details" class="unit-details">
                <div id="unit-log-conversations" class="unit-conversations"></div>
            </div>
        </div>
    `;

            // Initialize conversations
            initializeConversations();
        }

        function toggleUnitDetails(unitId, isSenior) {
            // Hide all unit details first
            const allDetails = document.querySelectorAll('.unit-details');
            allDetails.forEach(detail => detail.style.display = 'none');

            const selectedDetail = document.getElementById(`unit-${unitId}-details`);
            if (selectedDetail) {
                selectedDetail.style.display = 'block';

                // Show different content based on unit type
                if (isSenior) {
                    displaySeniorContent(unitId);
                } else {
                    displayLowerUnitContent(unitId);
                }
            }
        }

        function displaySeniorContent(unitId) {
            const container = document.getElementById(`unit-${unitId}-details`);

            // Sample senior questions data (in real app, this would come from backend)
            const seniorQuestions = [
                {
                    id: 'SQ1',
                    title: 'Strategic Operation Guidelines',
                    content: 'Request for updated protocols on cross-border operations',
                    from: 'Col. Richards',
                    time: '2 hours ago',
                    status: 'pending'
                },
                {
                    id: 'SQ2',
                    title: 'Equipment Requisition Approval',
                    content: 'Need authorization for advanced surveillance equipment',
                    from: 'Maj. Thompson',
                    time: '4 hours ago',
                    status: 'pending'
                }
            ];

            // Create the senior content HTML
            container.innerHTML = `
        <div class="unit-chat-section">
            <div class="unit-chat-tabs">
                <button class="unit-chat-tab active" onclick="switchUnitTab('${unitId}', 'questions')">Questions</button>
                <button class="unit-chat-tab" onclick="switchUnitTab('${unitId}', 'chat')">Chat History</button>
            </div>

            <div class="unit-content questions-content active">
                <div class="senior-questions">
                    ${seniorQuestions.map(q => `
                        <div class="senior-question" data-id="${q.id}">
                            <div class="question-header">
                                <span class="question-title">${q.title}</span>
                                <span class="question-meta">${q.from} â€¢ ${q.time}</span>
                            </div>
                            <div class="question-body">${q.content}</div>
                            <div class="question-response">
                                <textarea class="response-input" placeholder="Type your response..."></textarea>
                                <button class="response-btn" onclick="submitSeniorResponse('${q.id}')">Submit Response</button>
                            </div>
                        </div>
                    `).join('')}
                </div>
            </div>

            <div class="unit-content chat-content">
                <div class="chat-history">
                    ${getSeniorChatHistory(unitId)}
                </div>
            </div>
        </div>
    `;
        }

        function displayLowerUnitContent(unitId) {
            const container = document.getElementById(`unit-${unitId}-details`);

            // Sample chat history for lower units (read-only)
            container.innerHTML = `
        <div class="unit-chat-section">
            <div class="chat-history read-only">
                ${getLowerUnitChatHistory(unitId)}
            </div>
        </div>
    `;
        }

        function getSeniorChatHistory(unitId) {
            // Sample chat history data (in real app, this would come from backend)
            const chatHistory = [
                {
                    sender: 'CDR. MICHAEL PARKER',
                    message: 'Update on Operation Safeguard required.',
                    time: '10:30 AM',
                    isSenior: true
                },
                {
                    sender: 'Col. Matthews',
                    message: 'Reports submitted for review, sir.',
                    time: '10:35 AM',
                    isSenior: false
                }
            ];

            return chatHistory.map(msg => `
        <div class="chat-message ${msg.isSenior ? 'senior' : ''}">
            <div class="message-header">
                <span class="sender">${msg.sender}</span>
                <span class="time">${msg.time}</span>
            </div>
            <div class="message-content">${msg.message}</div>
        </div>
    `).join('');
        }

        function getLowerUnitChatHistory(unitId) {
            // Sample chat history for lower units (in real app, this would come from backend)
            const chatHistory = [
                {
                    sender: 'Unit Command',
                    message: 'Daily status report required.',
                    time: '09:00 AM'
                },
                {
                    sender: 'Operations',
                    message: 'Acknowledged, preparing report.',
                    time: '09:05 AM'
                }
            ];

            return chatHistory.map(msg => `
        <div class="chat-message">
            <div class="message-header">
                <span class="sender">${msg.sender}</span>
                <span class="time">${msg.time}</span>
            </div>
            <div class="message-content">${msg.message}</div>
        </div>
    `).join('');
        }

        function switchUnitTab(unitId, tab) {
            const container = document.getElementById(`unit-${unitId}-details`);
            const tabs = container.querySelectorAll('.unit-chat-tab');
            const contents = container.querySelectorAll('.unit-content');

            // Update active tab
            tabs.forEach(t => t.classList.remove('active'));
            container.querySelector(`[onclick="switchUnitTab('${unitId}', '${tab}')"]`).classList.add('active');

            // Show selected content
            contents.forEach(c => c.classList.remove('active'));
            container.querySelector(`.${tab}-content`).classList.add('active');
        }

        function submitSeniorResponse(questionId) {
            const questionEl = document.querySelector(`.senior-question[data-id="${questionId}"]`);
            const response = questionEl.querySelector('.response-input').value.trim();

            if (response) {
                // Here you would typically send the response to your backend
                alert('Response submitted successfully!');
                questionEl.querySelector('.response-input').value = '';

                // Optionally, update the UI to show the response was submitted
                questionEl.classList.add('responded');
            } else {
                alert('Please enter a response before submitting.');
            }
        }
    </script>

    <div class="answer-popup" id="answerPopup">
    <div class="answer-form">
        <h3 class="form-title">Submit Your Answer</h3>
        <div class="question-display">
            <div class="question-label">QUESTION:</div>
            <div id="selectedQuestion" class="selected-question"></div>
            <div class="session-tag" id="sessionId"></div>
        </div>
        <textarea class="answer-textarea" placeholder="Type your answer here..." id="answerText"></textarea>
        <div class="form-buttons">
            <button class="form-btn cancel" onclick="closeAnswerPopup()">Cancel</button>
            <button class="form-btn submit" onclick="submitAnswer()">Submit Answer</button>
        </div>
    </div>
</div>

<div class="modal" id="reviewModal">
    <div class="modal-content">
        <span class="close-btn" onclick="closeReviewModal()">&times;</span>
        <h2 class="modal-title">Pending Approvals</h2>
        <div id="approvalsList">
            </div>
    </div>
</div>

<div class="modal" id="postQuestionModal">
    <div class="modal-content">
        <span class="close-btn" onclick="closePostQuestionModal()">&times;</span>
        <h2 class="modal-title">Post Question</h2>
        <div class="post-question-form">
            <div class="form-group">
                <label class="form-label">Question Title</label>
                <input type="text" class="form-input" id="questionTitle" placeholder="Enter question title...">
            </div>

            <div class="form-group">
                <label class="form-label">Question Details</label>
                <textarea class="form-textarea" id="questionDetails" placeholder="Provide more details about your question..."></textarea>
            </div>

            <div class="form-group">
                <label class="form-label">Select Units to Post To</label>
                <div class="unit-selection">
                    <div class="unit-checkbox">
                        <input type="checkbox" id="unit-hq" value="HQ">
                        <label for="unit-hq">Headquarters</label>
                    </div>
                    <div class="unit-checkbox">
                        <input type="checkbox" id="unit-sf" value="SF">
                        <label for="unit-sf">Special Forces</label>
                    </div>
                    <div class="unit-checkbox">
                        <input type="checkbox" id="unit-rd" value="RD">
                        <label for="unit-rd">Research & Development</label>
                    </div>
                    <div class="unit-checkbox">
                        <input type="checkbox" id="unit-log" value="LOG">
                        <label for="unit-log">Logistics</label>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <div class="anonymity-toggle">
                    <input type="checkbox" id="postAnonymously">
                    <label for="postAnonymously">Post Anonymously</label>
                    <span class="tooltip">â”
                        <span class="tooltip-text">Your identity will be hidden from other users but still traceable by command.</span>
                    </span>
                </div>
            </div>

            <div class="form-buttons">
                <button class="form-btn cancel" onclick="closePostQuestionModal()">Cancel</button>
                <button class="form-btn submit" onclick="submitQuestion()">Post Question</button>
            </div>
        </div>
    </div>
</div>
</body>
</html>